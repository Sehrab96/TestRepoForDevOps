trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: NodeTool@0 
  inputs:
    versionSpec: '12.x' # replace this value with the version that you need for your project
  displayName: 'Install Node.js'

- script:
    npm install --global sfdx-cli
  displayName: "Install Salesforce CLI"
- script:
    sfdx help
  displayName: "Help SFDX"
- script:
    sfdx force:auth:jwt:grant --clientid $(CONSUMER_KEY) --username $(USERNAME) --setdefaultdevhubusername --setalias DevHub --jwtkeyfile ./server.key
  displayName: "Authorise Salesforce DevHub"
- script:
    sfdx force:source:deploy -m ApexClass
  displayName: "Deploying Apex Class"
